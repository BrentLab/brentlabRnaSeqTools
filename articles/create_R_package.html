<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="brentlabRnaSeqTools">
<title>Create an R project suitable for Bioconductor • brentlabRnaSeqTools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create an R project suitable for Bioconductor">
<meta property="og:description" content="brentlabRnaSeqTools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">brentlabRnaSeqTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/brentlabRnaSeqTools.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/ProcessRun.html">Process a New Run From MGI</a>
    <a class="dropdown-item" href="../articles/envPerturbation.html">Environmental Perturbation Analysis Data Creation</a>
    <a class="dropdown-item" href="../articles/ninetyMinuteInduction_analysis.html">90 Minute Induction Analysis Data Creation</a>
    <a class="dropdown-item" href="../articles/QC_Library_Quality.html">QC: Library Quality</a>
    <a class="dropdown-item" href="../articles/QC_Sample_Agreement_Objects.html">QC: Replicate Agreement</a>
    <a class="dropdown-item" href="../articles/Tally.html">Tally Experiment Sets</a>
    <a class="dropdown-item" href="../articles/Rank_Response_Plot.html">Rank Reponse Plot</a>
    <a class="dropdown-item" href="../articles/image_table_interactions.html">Image Table Interaction</a>
    <a class="dropdown-item" href="../articles/create_R_package.html">Create an R project suitable for Bioconductor</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="create_R_package_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create an R project suitable for Bioconductor</h1>
                        <h4 data-toc-skip class="author">Chase Mateusiak</h4>
            
            <h4 data-toc-skip class="date">08/04/2022</h4>
      
      
      <div class="d-none name"><code>create_R_package.Rmd</code></div>
    </div>

    
        <div class="abstract">
      <p class="abstract">Abstract</p>
      <p>Create an R project that may be uploaded to bioconductor. brentlabRnaSeqTools package version: 0.0.0.0</p>
    </div>
    
<div class="section level2">
<h2 id="what-is-a-package">What is a package?<a class="anchor" aria-label="anchor" href="#what-is-a-package"></a>
</h2>
<p>For the purpose of this vignette, a package is a collection of classes, functions, tests, data and documentation which may be collected together and installed on a host system using a given language’s <code>install</code> tools. For R, this is the <code>install</code> family (eg, <code>install.packages</code>, <code><a href="https://rdrr.io/pkg/BiocManager/man/install.html" class="external-link">BiocManager::install()</a></code>, or <code>remotes::install_github</code>), or <code>pip</code> for python. Critically, the package should provide instructions regarding required and suggested dependencies.</p>
<p>Packaging makes it easy to use certain tools which exist to make code more correct, reliable and maintainable. Test frameworks and continuous integration are examples of these tools.</p>
<p>But, getting the benefits of packaged software requires a certain amount of ‘boilerplate’, and ongoing maintenance of the ‘boilerplate’ files. For instance, the <a href="https://github.com/BrentLab/brentlabRnaSeqTools/blob/main/DESCRIPTION" class="external-link">DESCRIPTION</a> file is required in R packages, and the developer must maintain this file to include all of the major dependencies. Luckily, in R, there are a number of tools which greatly simplify this. They are the following:</p>
<ul>
<li><a href="https://usethis.r-lib.org/" class="external-link">usethis – a collection of a lot of development tools. More or less, everything is here</a></li>
<li><a href="https://roxygen2.r-lib.org/" class="external-link">roxygen2 – for building documentation</a></li>
<li>
<a href="https://bioconductor.org/packages/release/bioc/vignettes/biocthis/inst/doc/biocthis.html" class="external-link">biocthis – an extension of some usethis functionality, and some extras, which make developing packages which adhere to Bioconductor standards easier</a> -<a href="https://rstudio.github.io/renv/" class="external-link">renv – similar to venv for python</a>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="when-should-i-make-a-package">When should I make a package?<a class="anchor" aria-label="anchor" href="#when-should-i-make-a-package"></a>
</h2>
<p>If you are doing exploratory data analysis, and write a function that you realize you might want to use outside of that script, you should put it into a package. Maybe that package is just your personal functions, classes, etc. Maybe it is a new package that might grow into distributable software that you can include in a publication later on. It is easier to do it in the beginning than it is to write a lot of unpackaged, undocumented, etc. code, and then package it later. If you learn how to use the tools listed above, then writing within packages (and projects, in R, a package’s lightweight cousin) will make things go faster.</p>
</div>
<div class="section level2">
<h2 id="do-i-need-to-follow-the-bioconductor-standards">Do I need to follow the Bioconductor standards?<a class="anchor" aria-label="anchor" href="#do-i-need-to-follow-the-bioconductor-standards"></a>
</h2>
<p>No. You could, for instance, follow CRAN standards instead. Alternatively, you don’t need to adhere to either CRAN or Bioconductor standards if you don’t plan to submit the package to a public repo. You can still host the package on github, and if you follow the absolute minimum standards of ‘packaged’ software, you and anyone else could install your software from github using <code>remotes::install_github(your_github_username/your_repo_name)</code>.</p>
</div>
<div class="section level2">
<h2 id="i-like-python-more-or-i-am-doing-something-for-which-python-is-better">I like python more (or, I am doing something for which Python is better)<a class="anchor" aria-label="anchor" href="#i-like-python-more-or-i-am-doing-something-for-which-python-is-better"></a>
</h2>
<p>Packaging in python is very similar, but there isn’t a tool as nice as <code>usethis</code> and <code>biocthis</code> unfortunately. I suggest <a href="https://python-poetry.org/" class="external-link">Poetry</a>. A nice feature of python is that PyPI, more or less equivalent to CRAN, has exactly 0 standards except that the package can be built with <code>pip</code>. They may not even enforce that. Additionally, from <code>PyPI</code> you can write a <a href="https://bioconda.github.io/" class="external-link">bioconda</a> recipe to add your software to bioconda.</p>
</div>
<div class="section level2">
<h2 id="bioconductor-packages-are-autoamtically-added-to-bioconda-and-bioconda-packages-are-automatically-containerized-and-hosted-in-both-docker-quay-and-singularity-galaxy-by-biocontainers">Bioconductor packages are autoamtically added to bioconda, and bioconda packages are automatically containerized and hosted in both docker (quay) and singularity (galaxy) by biocontainers<a class="anchor" aria-label="anchor" href="#bioconductor-packages-are-autoamtically-added-to-bioconda-and-bioconda-packages-are-automatically-containerized-and-hosted-in-both-docker-quay-and-singularity-galaxy-by-biocontainers"></a>
</h2>
<p>Enough said.</p>
</div>
<div class="section level2">
<h2 id="creating-a-package">Creating a package<a class="anchor" aria-label="anchor" href="#creating-a-package"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># I put software on which I write in a directory in my $HOME called code</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"~/code"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a new package with some biolerplate added for you</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu">create_package</span><span class="op">(</span><span class="st">"BSA"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add a bunch of scripts which you can use to add a bunch of very nice, useful </span></span>
<span><span class="co"># features to your package. Even if you aren't planning to add this to </span></span>
<span><span class="co"># Bioconductor, these are nice features (eg, github actions CI, a github pages with pkgdown, etc)</span></span>
<span><span class="fu">biocthis</span><span class="fu">::</span><span class="fu">use_bioc_pkg_templates</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>biocthis will create 4 scripts which you can work through to get the package ‘biolerplate’ (eg, DESCRIPTION file, CITATIONS, NEWS, etc) as well as github integration (including github actions and a gh-pages branch). Note that I have had a lot of trouble getting github actions to automatically build the documentation on the gh-pages branch using pkgdown – it takes a lot of fiddling. It is worth it though.</p>
</div>
<div class="section level2">
<h2 id="write-stuff">Write stuff!<a class="anchor" aria-label="anchor" href="#write-stuff"></a>
</h2>
<p>Functions and classes go into the <code>R</code> directory. use <code>usethis::use_r('foo')</code> to create a file, in this case called <code>R/foo.R</code> and automatically open it for you. While that file is active (open), you can create a test for that file using <code>usethis::use_test()</code> which will create a file with the appropriate structure in <code>tests/testthat/test-foo.R</code>.</p>
</div>
<div class="section level2">
<h2 id="documentation-with-sinew-and-roxygen2">Documentation with Sinew and Roxygen2<a class="anchor" aria-label="anchor" href="#documentation-with-sinew-and-roxygen2"></a>
</h2>
<p>Roxygen2 is similar to Doxygen, which has been around for a long time and builds documentation/specification for your code. You have to write it in a specific format, but then it gets parsed nicely. This is how the documentation that appears when you do <code>?function</code> is written. Roxygen2 is the parser/builder of the documentation. <a href="https://github.com/yonicd/sinew" class="external-link">Sinew</a> is a helper package which will create the skeleton structure of the documentation for you – this is useful, because writing the documentation does take a lot of typing. See <a href="https://www.r-bloggers.com/2017/05/sinew-a-r-package-to-create-self-populating-roxygen2-skeletons/" class="external-link">here</a> and <a href="https://yonicd.github.io/sinew/reference/pretty_namespace.html" class="external-link">here</a> for help with using Sinew and <a href="https://r-pkgs.org/man.html" class="external-link">here</a> and <a href="https://roxygen2.r-lib.org/" class="external-link">here</a> for help with roxygen2.</p>
</div>
<div class="section level2">
<h2 id="but-i-just-want-to-use-notebooks">But I just want to use notebooks<a class="anchor" aria-label="anchor" href="#but-i-just-want-to-use-notebooks"></a>
</h2>
<p>There are two arguably better options – the first is to do your EDA in a notebook which is in the vignettes directory of a package. You can create the skeleton of one with <code>usethis::use_vignettes("your_vignette_name")</code>. This will act as both your analysis, it will get built as part of your documentation, and it will serve as instructions on how to use your package.</p>
<p>Alternatively, you could open another R session, and maybe make a project using <code>usethis::create_project('project_name')</code> rather than a package. A project is just a directory with some extra little files which make it easy to save the environment – it is a nice place to do your work, in other words. Then you can make notebooks, save data, save variables, etc. in this project and import the package that you’re concurrently working on into it.</p>
</div>
<div class="section level2">
<h2 id="publishing">Publishing<a class="anchor" aria-label="anchor" href="#publishing"></a>
</h2>
<p>Bioconductor does have comparatively high standards for quality – at minimum, make sure all of the R CMD and bioc tests are passing. Then visit the bioconductor website and follow their instructions on submitting. Alternatively, you can submit to CRAN. Or, if you’ve been using github, you don’t even really need to worry about this – your package can already be installed by users using <code>remotes::install_github("username/Package")</code>. If you’re using the pkgdown and gh-pages branch, then you also have nice, professional looking documentation.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Chase Mateusiak.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
